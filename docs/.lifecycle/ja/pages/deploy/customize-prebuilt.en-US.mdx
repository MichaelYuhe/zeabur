---
title: カスタムプリビルト
ogImageTitle: カスタムプリビルト
ogImageSubtitle: Zeaburで独自のDockerイメージを展開
---

import { Callout } from 'nextra-theme-docs'

# カスタムプリビルト

Zeaburには、多くのコミュニティ提供のプリビルトテンプレート（プリビルトマーケットプレース）が含まれていますが、独自のDockerイメージを展開したり、状態を保持するサービス（ストレージスペース）を構成したり、他のサービスに変数を公開するなどの高度な環境変数機能を使用する必要がある場合があります。

このようなニーズに対応するために、Zeaburではプリビルトのためのカスタム機能を提供しています。

## カスタムページを開く

<Callout>
    カスタム機能を使用するには、デベロッパープランまたはそれ以上のプランにアップグレードする必要があります。
</Callout>

以下は、シンプルなプリビルトサービスを作成し、Zeaburに展開する方法です。

プロジェクトを作成した後、「サービスの作成」→「プリビルト」→「カスタム」の順にクリックしてください：

![カスタムページを開く](/deploy/customize-prebuilt/open-customize.png)

すると、プリビルトのカスタムページが表示されます。

![プリビルトカスタムページ](/deploy/customize-prebuilt/prebuilt-config-page.png)

## 例：MariaDBの展開

以下の例では、プリビルトのカスタム機能を使用してMariaDBを展開する方法を示します。

![MariaDB構成例](/deploy/customize-prebuilt/mariadb-config-example.png)

まず、「サービス名」に「MariaDB」を入力し、**サービスアイコン**にMariaDBのアイコンリンクを貼り付けます。実際には、これらの名前やアイコンは任意に定義できますが、見やすい名前とアイコンを使用することでサービスの目的を理解しやすくなります。**イメージ**は、`docker pull mariadb:11`のようなDockerイメージへの参照です。

**データパス**は「再起動時にクリーンアップされないパス（保持）」です。MariaDBの場合、そのデータベースファイルは`/var/lib/mysql`内にあり、通常はMariaDBサービスのデータベースファイルを再起動後に削除したくないため、データパスを`/var/lib/mysql`に設定します。Dockerのコンセプトでは、データパスは「ボリューム」または「永続ボリューム (PV)」とも呼ばれます。

**ポート**には、他のサービス（または自分自身）がMariaDBに接続できるようにするためのMariaDBのポート番号を入力します。MariaDBの構成によると、MariaDBとMySQLはデフォルトで`3306`でリッスンするため、3306を入力します。さらに、MariaDBは接続にTCPを使用するため、右側で接続ポートの種類をHTTPからTCPに変更します。左側をカスタマイズすることができます。この名前は環境変数で使用されるため、不要なスペースやシンボルを含まずにシンプルに保つ必要があります。この例では、`database`を使用します。

最後に、**環境変数**があります。`${CONTAINER_HOSTNAME}`のような変数を持つフィールドは、他のサービス変数やプロジェクトで公開された変数、そして特別な変数の値を導入できます。上記の例のイメージでは：

- `${MARIADB_ROOT_PASSWORD}`は、このサービス向けの`MARIADB_ROOT_PASSWORD`変数を導入し、この例では`${PASSWORD}`です。
- `${PASSWORD}`は、Zeaburがこのサービス向けに生成した一意のランダムパスワードを導入します。

変数`${MARIADB_USERNAME}`と`${MARIADB_PASSWORD}`を他のサービスで`Exposed`として選択すると使用できます。`Readonly`がチェックされている場合は、この変数値の誤操作を防ぐために制限することができます。

すべてのフィールドが正しいことを確認したら、「作成」をクリックしてMariaDBを作成します。

## 各フィールドの説明

- **サービス名**: このプリビルトサービスの名前。
- **サービスアイコン**: このプリビルトサービスのアイコン。
- **データパス**: プリビルトが継続してデータを保持するパス。空白の場合、このスペースは作成されず、保持データのパフォーマンスへの影響が低減されます。
- **イメージ**: プリビルトサービスのDockerイメージ参照。`mariadb:11`のようなもの。
- **ポート**: 公開ネットワークや他のサービスに公開される接続ポート。
    - ポート名はこの接続ポートの名前を識別します。英字、数字、ハイフンのみが使用できます。
    - ポートタイプは接続ポートの種類で、現在はTCP、UDP、HTTPをサポートしています。
        - HTTPのみがドメイン名にバインドできます。
- **環境変数**: 環境変数
    - 他のサービスに`Exposed`として選択できます。または`Readonly`として選択できます。
    - 環境変数の名前には英字、数字、アンダースコアのみ使用できます。
    - 他の公開環境変数や [特別な変数](./special-variables) を参照するために `${VARIABLE}` 構文を使用します。